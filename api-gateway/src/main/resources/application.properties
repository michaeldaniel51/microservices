eureka.client.serviceUrl.defaultZone=http://localhost:8761/eureka
spring.application.name=api-gateway-service
server.port = 8087

logging.level.root=INFO
logging.level.org.springframework.cloud.gateway.route.RouteDefinitionLocator=INFO
logging.level.org.springframework.cloud.gateway=TRACE


spring.cloud.gateway.discovery.locator.enabled=true


# bank route
spring.cloud.gateway.routes[0].id=bank-service
spring.cloud.gateway.routes[0].uri=lb://bank-service
spring.cloud.gateway.routes[0].predicates[0]=Path=/bank,/customer/**
spring.cloud.gateway.routes[0].filters[0]= RewritePath=/bank/(?<path>.*), /$\{path}



# transaction-reference route
spring.cloud.gateway.routes[1].id=transaction-service
spring.cloud.gateway.routes[1].uri=lb://transaction-service
spring.cloud.gateway.routes[1].predicates[0]=Path=/transaction,/event
spring.cloud.gateway.routes[1].filters[0]= RewritePath=/transaction/(?<path>.*), /$\{path}


# discovery-server route
spring.cloud.gateway.routes[2].id=discovery-server
spring.cloud.gateway.routes[2].uri=http://localhost:8761
spring.cloud.gateway.routes[2].predicates[0]=Path=/eureka/web
spring.cloud.gateway.routes[2].filters[0]=SetPath=/

# discover server static route
spring.cloud.gateway.routes[3].id=discovery-server-static
spring.cloud.gateway.routes[3].uri=http://localhost:8761
spring.cloud.gateway.routes[3].predicates[0]=Path=/eureka/**

#debug=true
#spring.cloud.consul.config.enabled=false
#spring.cloud.consul.host=192.168.99.100
#spring.cloud.consul.port=8500


server.ssl.enabled=true
server.ssl.key-store-type=PKCS12
server.ssl.key-store=classpath:localhost-ssl.p12
server.ssl.key-store-password=123456
#server.ssl.key-alias=localhost-ssl

server.servlet.context-path=/
springdoc.api-docs.enabled=true
springdoc.swagger-ui.enabled=true
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.enable-native-support=true


springdoc.swagger-ui.urls[0].name=API Gateway
springdoc.swagger-ui.urls[0].url=/v3/api-docs
springdoc.swagger-ui.urls[1].name=Bank Service
springdoc.swagger-ui.urls[1].url=/bank-service/v3/api-docs
springdoc.swagger-ui.urls[2].name=Transaction Service
springdoc.swagger-ui.urls[2].url=/transaction-service/v3/api-docs


spring.security.oauth2.resourceserver.jwt.issuer-uri=http://localhost:8080/realms/microservices
